application_surface_draw_enable(true)
if file_exists("save9.ini")
    file_delete("save9.ini")
if file_exists("Save/save9.ini")
    file_delete("Save/save9.ini")
audio_stop_all()
scr_views_editor()
mapdoor_u = 0
mapdoor_r = 0
mapdoor_l = 0
mapdoor_d = 0
mapdoor_s = 0
mapdoor_e = 0
global.editor = 1
global.dump_tool = 0
global.editor_id = id
global.getlist = -1
global.cutlist = -1
hassuit = "yes"
quest = -1
downopen = 0
upopen = 0
rightopen = 0
leftopen = 0
properties_roomtarget_x = "08"
properties_roomtarget_y = "08"
properties_maptarget = "map0"
cursor_rotation = 0
cursor_xscale = 1
cursor_yscale = 1
global.uid_tool = 1
global.uid_count = 0
uid_current = process_editor_tally_uids()
dropperflag = 0
cannot_escape = 1
alarm[0] = 60
title_x = 397
title_y = 315
prop_pane_x = 400
prop_pane_y = 8
prop_button[0] = -1
var t_map = "map.ini"
if (!file_exists(t_map))
{
    ini_open(t_map)
    map_name = "demo map"
    if (!(ds_exists(MAP_MANAGER.map_loaded, 1)))
        process_mapmanager_load()
    start_room = ds_map_find_value(MAP_MANAGER.map_loaded, "default_room")
    ini_write_string("main", "start_room", "0808")
    ini_write_string("main", "map_name", map_name)
    ini_close()
}
else
{
    ini_open(t_map)
    if (!(ds_exists(MAP_MANAGER.map_loaded, 1)))
        process_mapmanager_load()
    start_room = ds_map_find_value(MAP_MANAGER.map_loaded, "default_room")
    map_name = ini_read_string("main", "map_name", "demo map")
    ini_close()
}
global.room_start = start_room
map_width = "19"
map_height = "12"
scr_cout("welcome to the catroid level editor #loaded map: " + map_name)
console_x = 6
console_y = 224
window_set_cursor(cr_none)
cursor_change("hand")
spawn_flag = 0
palette_cur_x = -1
palette_cur_y = -1
palette_cur_i = 0
palette_cur_j = 0
palette_cur_sclx = 1
palette_cur_scly = 1
palette_hov_x = -1
palette_hov_y = -1
palette_obj_selected = -1
grid_layer = "player"
for (var i = 0; i < 19; i++)
{
    for (var j = 0; j < 12; j++)
        room_editor[i, j] = ds_map_create()
}
for (i = 0; i < 19; i++)
{
    for (j = 0; j < 12; j++)
        room_editor_f[i, j] = ds_map_create()
}
t_layer = room_editor
grid_focus_i = -1
grid_focus_j = -1
edit_mode = "tileset"
cursor_change("hand")
current_tileset = 0
tile_tileset = -1
tile_tilesets = -1
for (current_tileset = 0; current_tileset < array_length_1d(global.tileset_sprites); current_tileset++)
{
    tile_tileset = -1
    for (var ttt = 0; ttt < ds_list_size(global.tileset_sprites[current_tileset]); ttt++)
        tile_tileset[ttt] = 12
    tile_tilesets[current_tileset] = tile_tileset
}
current_tileset = 0
tile_tileset = tile_tilesets[current_tileset]
tile_enemy[0] = 255
tile_enemy[1] = -2
tile_enemy[15] = -3
tile_enemy[16] = -4
tile_enemy[2] = 250
tile_enemy[3] = -2
tile_enemy[17] = -3
tile_enemy[18] = -4
tile_enemy[4] = 251
tile_enemy[5] = -2
tile_enemy[19] = -3
tile_enemy[20] = -4
tile_enemy[6] = 252
tile_enemy[7] = -2
tile_enemy[21] = -3
tile_enemy[22] = -4
tile_enemy[8] = 280
tile_enemy[9] = -2
tile_enemy[23] = -3
tile_enemy[24] = -4
tile_enemy[10] = 235
tile_enemy[11] = -2
tile_enemy[25] = -3
tile_enemy[26] = -4
tile_enemy[12] = 254
tile_enemy[13] = -2
tile_enemy[27] = -3
tile_enemy[28] = -4
tile_enemy[14] = -1
tile_enemy[29] = -1
tile_enemy[30] = 256
tile_enemy[31] = -2
tile_enemy[45] = -3
tile_enemy[46] = -4
tile_enemy[32] = -1
tile_enemy[33] = 258
tile_enemy[47] = -1
tile_enemy[48] = -3
tile_enemy[34] = -2
tile_enemy[35] = -1
tile_enemy[49] = -4
tile_enemy[50] = -1
tile_enemy[36] = 296
tile_enemy[37] = -2
tile_enemy[51] = -3
tile_enemy[52] = -4
tile_enemy[38] = -1
tile_enemy[53] = -1
tile_enemy[39] = 262
tile_enemy[40] = -2
tile_enemy[54] = -3
tile_enemy[55] = -4
tile_enemy[41] = 273
tile_enemy[42] = -2
tile_enemy[56] = -3
tile_enemy[57] = -4
tile_enemy[43] = 271
tile_enemy[44] = -2
tile_enemy[58] = -3
tile_enemy[59] = -4
tile_enemy[60] = 265
tile_enemy[61] = -2
tile_enemy[75] = -3
tile_enemy[76] = -4
tile_enemy[62] = 275
tile_enemy[63] = -2
tile_enemy[77] = -3
tile_enemy[78] = -4
tile_enemy[64] = 279
tile_enemy[65] = -2
tile_enemy[79] = -3
tile_enemy[80] = -4
tile_enemy[66] = 248
tile_enemy[67] = -2
tile_enemy[81] = -3
tile_enemy[82] = -4
tile_enemy[68] = 274
tile_enemy[69] = -2
tile_enemy[83] = -3
tile_enemy[84] = -4
tile_enemy[70] = 394
tile_enemy[71] = -2
tile_enemy[85] = -3
tile_enemy[86] = -4
tile_enemy[72] = 364
tile_enemy[73] = -2
tile_enemy[87] = -3
tile_enemy[88] = -4
tile_lab[0] = 406
tile_lab[1] = -2
tile_lab[15] = -3
tile_lab[16] = -4
tile_lab[2] = 408
tile_lab[3] = -1
tile_lab[17] = -1
tile_lab[18] = -1
tile_lab[4] = 26
tile_lab[5] = -2
tile_lab[19] = -3
tile_lab[20] = -4
tile_lab[6] = 127
tile_lab[7] = -2
tile_lab[21] = -3
tile_lab[22] = -4
tile_lab[8] = 413
tile_lab[9] = -2
tile_lab[23] = -3
tile_lab[24] = -4
tile_lab[10] = 411
tile_lab[11] = -2
tile_lab[25] = -3
tile_lab[26] = -4
tile_lab[12] = 414
tile_lab[13] = -2
tile_lab[27] = -3
tile_lab[28] = -4
tile_lab[14] = 104
tile_lab[29] = -1
tile_lab[30] = 417
tile_lab[31] = -2
tile_lab[45] = -3
tile_lab[46] = -4
tile_lab[32] = 420
tile_lab[33] = -2
tile_lab[47] = -3
tile_lab[48] = -4
tile_lab[34] = 415
tile_lab[35] = -2
tile_lab[49] = -3
tile_lab[50] = -4
tile_lab[36] = 160
tile_lab[37] = 421
tile_lab[51] = 119
tile_lab[52] = -1
tile_lab[38] = -1
tile_lab[53] = -1
tile_lab[39] = 236
tile_lab[40] = -2
tile_lab[54] = -3
tile_lab[55] = -4
tile_lab[41] = 426
tile_lab[42] = 404
tile_lab[56] = -1
tile_lab[57] = -1
tile_lab[43] = 441
tile_lab[44] = -2
tile_lab[58] = -1
tile_lab[59] = -1
tile_lab[60] = 418
tile_lab[61] = -2
tile_lab[75] = -1
tile_lab[76] = -1
tile_lab[62] = 106
tile_lab[63] = -2
tile_lab[77] = -3
tile_lab[78] = -4
tile_lab[64] = 437
tile_lab[65] = -2
tile_lab[79] = 405
tile_lab[80] = -1
tile_lab[66] = 442
tile_lab[67] = -2
tile_lab[81] = 439
tile_lab[82] = -1
tile_lab[68] = 449
tile_lab[69] = 450
tile_lab[83] = -1
tile_lab[84] = -1
tile_lab[70] = -1
tile_lab[71] = -1
tile_lab[85] = -1
tile_lab[86] = -1
tile_lab[72] = -1
tile_lab[73] = -1
tile_lab[87] = -1
tile_lab[88] = -1
tile_wall[0] = 2
tile_wall[1] = 174
tile_wall[2] = 181
tile_wall[3] = 183
tile_wall[4] = 186
tile_wall[5] = 190
tile_wall[6] = 175
tile_wall[7] = 179
tile_wall[8] = 176
tile_wall[9] = 177
tile_wall[10] = 178
tile_wall[11] = 232
tile_wall[12] = 180
tile_wall[13] = 165
tile_wall[14] = 132
tile_wall[15] = 130
tile_wall[16] = 131
tile_wall[17] = 173
tile_wall[18] = 105
tile_wall[19] = 182
tile_wall[20] = 128
tile_wall[21] = 148
tile_wall[22] = 270
tile_wall[23] = 188
tile_wall[24] = 189
tile_wall[25] = 225
tile_wall[26] = 224
tile_wall[27] = 194
tile_wall[28] = 195
tile_wall[29] = 196
tile_wall[30] = 198
tile_wall[31] = 197
tile_wall[32] = 199
tile_wall[33] = 150
tile_wall[34] = 201
tile_wall[35] = 149
tile_wall[36] = 203
tile_wall[37] = 204
tile_wall[38] = 205
tile_wall[39] = 206
tile_wall[40] = 207
tile_wall[41] = 208
tile_wall[42] = 209
tile_wall[43] = 210
tile_wall[44] = 211
tile_wall[45] = 212
tile_wall[46] = 213
tile_wall[47] = 214
tile_wall[48] = 215
tile_wall[49] = 216
tile_wall[50] = 217
tile_wall[51] = 218
tile_wall[52] = 219
tile_wall[53] = 220
tile_wall[54] = 221
tile_wall[55] = 222
tile_wall[56] = 223
tile_wall[57] = 231
tile_wall[58] = 230
tile_wall[59] = 227
tile_wall[60] = 228
tile_wall[61] = 229
tile_wall[62] = 187
tile_wall[63] = 184
tile_wall[64] = 200
tile_wall[65] = 202
tile_wall[66] = 157
tile_wall[67] = 154
tile_wall[68] = 120
tile_wall[69] = 126
tile_wall[70] = 121
tile_wall[71] = 122
tile_wall[72] = 123
tile_wall[73] = 124
tile_wall[74] = 125
tile_wall[75] = 226
tile_hazard[0] = 240
tile_hazard[1] = 155
tile_hazard[2] = 156
tile_hazard[3] = 148
tile_hazard[4] = 145
tile_hazard[5] = 139
tile_hazard[6] = 147
tile_hazard[7] = 146
tile_hazard[8] = 138
tile_hazard[9] = 144
tile_hazard[10] = 137
tile_hazard[11] = 143
tile_hazard[12] = 142
tile_hazard[13] = 141
tile_hazard[14] = 140
tile_hazard[15] = 152
tile_hazard[16] = 153
tile_hazard[17] = 237
tile_hazard[18] = 238
tile_hazard[19] = 161
tile_hazard[20] = 162
tile_hazard[21] = 103
tile_hazard[22] = -2
tile_hazard[23] = -1
tile_hazard[24] = -1
tile_hazard[25] = 116
tile_hazard[26] = -2
tile_hazard[27] = -1
tile_hazard[28] = -1
tile_hazard[29] = -1
tile_hazard[30] = 134
tile_hazard[31] = 135
tile_hazard[32] = 136
tile_hazard[33] = 118
tile_hazard[34] = -2
tile_hazard[35] = 24
tile_hazard[36] = -2
tile_hazard[37] = 75
tile_hazard[38] = 245
tile_hazard[39] = 117
tile_hazard[40] = -2
tile_hazard[41] = -4
tile_hazard[42] = -1
tile_hazard[43] = -1
tile_hazard[44] = -1
tile_hazard[45] = -3
tile_hazard[46] = -3
tile_hazard[47] = -3
tile_hazard[48] = 108
tile_hazard[49] = -2
tile_hazard[50] = 110
tile_hazard[51] = -2
tile_hazard[52] = 113
tile_hazard[53] = -2
tile_hazard[54] = 111
tile_hazard[55] = -4
tile_hazard[56] = 112
tile_hazard[57] = -2
tile_hazard[58] = 115
tile_hazard[59] = -2
tile_hazard[60] = 107
tile_hazard[61] = -2
tile_hazard[62] = 114
tile_hazard[63] = -2
tile_hazard[64] = -4
tile_hazard[65] = -3
tile_hazard[66] = -4
tile_hazard[67] = -3
tile_hazard[68] = -4
tile_hazard[69] = -3
tile_hazard[70] = -1
tile_hazard[71] = -3
tile_hazard[72] = 370
tile_hazard[73] = 171
tile_hazard[74] = -2
palette_x = 12
palette_y = console_y + 38
scr_editor_palette_reset()
palette_obj_selected = -1
button[0] = instance_create(323, (palette_y - 12), obj_editor_button0)
button[0].depth = depth + 4
button[0].sprite_index = spr_palettetab1
button[0].text = ""
button[0].key_target = 49
button[1] = instance_create(323, (palette_y + 4), obj_editor_button0)
button[1].depth = depth + 3
button[1].sprite_index = spr_palettetab2
button[1].text = ""
button[1].key_target = 50
button[2] = instance_create(323, (palette_y + 20), obj_editor_button0)
button[2].depth = depth + 2
button[2].sprite_index = spr_palettetab3
button[2].text = ""
button[2].key_target = 51
button[3] = instance_create(323, (palette_y + 36), obj_editor_button0)
button[3].depth = depth + 1
button[3].sprite_index = spr_palettetab4
button[3].text = ""
button[3].key_target = 52
button[24] = instance_create(323, (palette_y + 52), obj_editor_button0)
button[24].depth = depth + 4
button[24].sprite_index = spr_palettetab5
button[24].text = ""
button[24].key_target = 53
button[25] = instance_create(323, (palette_y + 68), obj_editor_button0)
button[25].depth = depth + 4
button[25].sprite_index = spr_palettetab6
button[25].text = ""
button[25].key_target = 54
button[26] = instance_create(323, (palette_y + 84), obj_editor_button0)
button[26].depth = depth + 4
button[26].sprite_index = spr_palettetab7
button[26].text = ""
button[26].key_target = 55
button[4] = instance_create((title_x + 132), title_y, obj_editor_button0)
button[4].sprite_index = spr_editor_sqbutton20
button[4].text = "U"
button[4].key_target = 38
button[5] = instance_create((title_x + 132), (title_y + 20), obj_editor_button0)
button[5].sprite_index = spr_editor_sqbutton20
button[5].text = "D"
button[5].key_target = 40
button[6] = instance_create((title_x + 112), (title_y + 20), obj_editor_button0)
button[6].sprite_index = spr_editor_sqbutton20
button[6].text = "L"
button[6].key_target = 37
button[7] = instance_create((title_x + 152), (title_y + 20), obj_editor_button0)
button[7].sprite_index = spr_editor_sqbutton20
button[7].text = "R"
button[7].key_target = 39
button[8] = instance_create(360, 3, obj_editor_button0)
button[8].sprite_index = spr_func_turnleft
button[8].text = ""
button[8].key_target = 81
button[9] = instance_create(360, 30, obj_editor_button0)
button[9].sprite_index = spr_func_turnright
button[9].text = ""
button[9].key_target = 87
button[10] = instance_create(360, 57, obj_editor_button0)
button[10].sprite_index = spr_func_fliphor
button[10].text = ""
button[10].key_target = 69
button[11] = instance_create(360, 84, obj_editor_button0)
button[11].sprite_index = spr_func_flipvert
button[11].text = ""
button[11].key_target = 82
button[12] = instance_create(360, 111, obj_editor_button0)
button[12].sprite_index = spr_func_exitL
button[12].text = ""
button[12].key_target = 84
button[13] = instance_create(360, 138, obj_editor_button0)
button[13].sprite_index = spr_func_exitR
button[13].text = ""
button[13].key_target = 89
button[14] = instance_create(360, 165, obj_editor_button0)
button[14].sprite_index = spr_func_exitU
button[14].text = ""
button[14].key_target = 85
button[15] = instance_create(360, 193, obj_editor_button0)
button[15].sprite_index = spr_func_exitD
button[15].text = ""
button[15].key_target = 73
global.spawn_x = global.editor_spawn_x
global.spawn_y = global.editor_spawn_y
set_spawn = 0
button[16] = instance_create(4, 111, obj_editor_button0)
button[16].sprite_index = spr_func_setspawn
button[16].text = ""
button[16].key_target = 71
button[17] = instance_create(576, (title_y + 20), obj_editor_button0)
button[17].sprite_index = spr_editor_t_button_7
button[17].text = "run map"
button[17].key_target = 13
button[18] = instance_create(4, 3, obj_editor_button0)
button[18].sprite_index = spr_tool_pencil
button[18].text = ""
button[18].key_target = 65
button[19] = instance_create(4, 30, obj_editor_button0)
button[19].sprite_index = spr_tool_pencil_bku
button[19].text = ""
button[19].key_target = 83
button[20] = instance_create(4, 57, obj_editor_button0)
button[20].sprite_index = spr_bucket_cursor
button[20].text = ""
button[20].key_target = 68
button[21] = instance_create(4, 84, obj_editor_button0)
button[21].sprite_index = spr_tool_dropper
button[21].text = ""
button[21].key_target = 70
button[22] = instance_create(536, (title_y - 25), obj_editor_quest_chooser)
button[22].depth = depth - 1
button[23] = instance_create(536, (title_y - 12), obj_editor_cbox_startroom)
button[23].depth = depth - 1
process_mapmanager_changemap(global.editor_map)
process_mapmanager_load()
button[26] = instance_create(536, (title_y - 38), obj_editor_map_chooser)
button[26].depth = depth - 1
button[27] = instance_create(536, (title_y - 51), obj_editor_cbox_hassuit)
button[27].depth = depth - 1
button[28] = instance_create(536, (title_y - 64), obj_editor_cbox_editor_start_cat)
button[28].depth = depth - 1
button[28] = instance_create(title_x, (title_y - 51), obj_editor_cbox_rockets)
button[28].depth = depth - 1
button[28] = instance_create(title_x, (title_y - 38), obj_editor_cbox_spinjump)
button[28].depth = depth - 1
i = 0
var str = string(i)
while (string_length(str) < 3)
    str = "0" + str
while script_exists(asset_get_index("qu_" + str))
{
    button[22].property[(i + 1)] = "qu_" + str
    button[22].message[(i + 1)] = qu_descriptions(asset_get_index("qu_" + str))
    i++
    str = string(i)
    while (string_length(str) < 3)
        str = "0" + str
}
global.current_room = global.editor_room
editor_load_room(global.current_room)
